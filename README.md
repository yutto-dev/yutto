# yutto

<p align="center">
   <img src="./docs/public/logo.png" width="400px">
</p>

<p align="center">
   <a href="https://python.org/" target="_blank"><img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/yutto?logo=python&style=flat-square"></a>
   <a href="https://pypi.org/project/yutto/" target="_blank"><img src="https://img.shields.io/pypi/v/yutto?style=flat-square" alt="pypi"></a>
   <a href="https://pypi.org/project/yutto/" target="_blank"><img alt="PyPI - Downloads" src="https://img.shields.io/pypi/dm/yutto?style=flat-square"></a>
   <a href="LICENSE"><img alt="LICENSE" src="https://img.shields.io/github/license/yutto-dev/yutto?style=flat-square"></a>
   <br/>
   <a href="https://github.com/astral-sh/uv"><img alt="uv" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/uv/main/assets/badge/v0.json&style=flat-square"></a>
   <a href="https://github.com/astral-sh/ruff"><img alt="ruff" src="https://img.shields.io/endpoint?url=https://raw.githubusercontent.com/astral-sh/ruff/main/assets/badge/v2.json&style=flat-square"></a>
   <a href="https://gitmoji.dev"><img alt="Gitmoji" src="https://img.shields.io/badge/gitmoji-%20ğŸ˜œ%20ğŸ˜-FFDD67?style=flat-square"></a>
   <a href="https://discord.gg/5cQGyFwsqC"><img src="https://img.shields.io/badge/chat-discord-5d24a3?logo=discord&style=flat-square" alt="discord chat"></a>
</p>

<p align="center"><strong>ğŸ§Š yuttoï¼Œä¸€ä¸ªå¯çˆ±ä¸”ä»»æ€§çš„ B ç«™è§†é¢‘ä¸‹è½½å™¨ï¼ˆCLIï¼‰</strong></p>

**å®Œæ•´é™æ€æ–‡æ¡£åœ¨è¿™é‡Œå–” â†’ [yutto](https://yutto.nyakku.moe/)**

> [!TIP]
>
> å¦‚æœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·é€šè¿‡ [Issues](https://github.com/yutto-dev/yutto/issues) åé¦ˆåŠŸèƒ½æ­£ç¡®æ€§é—®é¢˜å’ŒåŠŸèƒ½è¯·æ±‚ï¼Œå…¶ä»–é—®é¢˜è¯·é€šè¿‡ [Discussions](https://github.com/yutto-dev/yutto/discussions) åé¦ˆï½

## ä»€ä¹ˆæ˜¯ yuttoï¼Ÿ

yutto æ˜¯ä¸€ä¸ª B ç«™è§†é¢‘ä¸‹è½½å™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ä¸‹è½½ B ç«™ä¸Šçš„æŠ•ç¨¿è§†é¢‘ã€ç•ªå‰§ã€è¯¾ç¨‹ç­‰èµ„æºï¼Œæ”¯æŒå•ä¸ªè§†é¢‘ä¸‹è½½ã€æ‰¹é‡ä¸‹è½½ç­‰åŠŸèƒ½ï¼Œå°±åƒè¿™æ ·ï¼š

```bash
â¯ yutto https://www.bilibili.com/video/BV1ZEf9YiE2h/
 INFO  å‘ç°é…ç½®æ–‡ä»¶ yutto.tomlï¼ŒåŠ è½½ä¸­â€¦â€¦
 å¤§ä¼šå‘˜  æˆåŠŸä»¥å¤§ä¼šå‘˜èº«ä»½ç™»å½•ï½
 æŠ•ç¨¿è§†é¢‘  æ¤ç‰©å¤§æˆ˜åƒµå°¸èåˆç‰ˆ2.2æ­£å¼ç‰ˆå®£ä¼ ç‰‡
 INFO  å¼€å§‹å¤„ç†è§†é¢‘ æ¤ç‰©å¤§æˆ˜åƒµå°¸èåˆç‰ˆ2.2æ­£å¼ç‰ˆå®£ä¼ ç‰‡
 INFO  å…±åŒ…å«ä»¥ä¸‹ 15 ä¸ªè§†é¢‘æµï¼š
 INFO  * 0 [AVC ] [1920x1080] <1080P 60å¸§> #3
 INFO    1 [HEVC] [1920x1080] <1080P 60å¸§> #3
 INFO    2 [AV1 ] [1920x1080] <1080P 60å¸§> #3
 INFO    3 [AVC ] [1920x1080] <1080P é«˜æ¸…> #3
 INFO    4 [HEVC] [1920x1080] <1080P é«˜æ¸…> #3
 INFO    5 [AV1 ] [1920x1080] <1080P é«˜æ¸…> #3
 INFO    6 [AVC ] [1280x720 ] <720P é«˜æ¸… > #3
 INFO    7 [HEVC] [1280x720 ] <720P é«˜æ¸… > #3
 INFO    8 [AV1 ] [1280x720 ] <720P é«˜æ¸… > #3
 INFO    9 [AVC ] [ 852x480 ] <480P æ¸…æ™° > #3
 INFO   10 [HEVC] [ 852x480 ] <480P æ¸…æ™° > #3
 INFO   11 [AV1 ] [ 852x480 ] <480P æ¸…æ™° > #3
 INFO   12 [AVC ] [ 640x360 ] <360P æµç•… > #3
 INFO   13 [HEVC] [ 640x360 ] <360P æµç•… > #3
 INFO   14 [AV1 ] [ 640x360 ] <360P æµç•… > #3
 INFO  å…±åŒ…å«ä»¥ä¸‹ 3 ä¸ªéŸ³é¢‘æµï¼š
 INFO  * 0 [MP4A] <320kbps >
 INFO    1 [MP4A] < 64kbps >
 INFO    2 [MP4A] <128kbps >
 å¼¹å¹•  ASS å¼¹å¹•å·²ç”Ÿæˆ
 INFO  å¼€å§‹ä¸‹è½½â€¦â€¦
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•¸â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”  39.05 MiB/ 72.13 MiB 32.22 MiB/âš¡
```

## ä»å®‰è£…å¼€å§‹ï½

### åŒ…ç®¡ç†å™¨ä¸€é”®å®‰è£…å•¦

ç›®å‰ yutto å·²ç»å¯ä»¥é€šè¿‡éƒ¨åˆ†åŒ…ç®¡ç†å™¨ç›´æ¥å®‰è£…ï½

ä½¿ç”¨ Homebrew çš„ç”¨æˆ·å¯ä»¥å°è¯•ä¸‹ä¸‹é¢çš„å‘½ä»¤ï¼š

```bash
brew tap siguremo/tap
brew install yutto
```

Arch Linux ç”¨æˆ·å¯ä»¥ä» [AUR](https://aur.archlinux.org/packages/yutto)ï¼ˆæ„Ÿè°¢ @ouuanï¼‰æˆ– [archlinuxcn](https://github.com/archlinuxcn/repo) å®‰è£…ï¼š

```bash
# ä» AUR å®‰è£…
yay -S yutto      # é€‚ç”¨äº yay ç”¨æˆ·
paru -S yutto     # é€‚ç”¨äº paru ç”¨æˆ·
# æˆ–è€…ä» archlinuxcn å®‰è£…
sudo pacman -S yutto
```

### ä½¿ç”¨ Docker

ä½ ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨ docker ç›´æ¥è¿è¡Œ yuttoï¼ˆå…·ä½“å¦‚ä½•è¿è¡Œéœ€è¦å‚è€ƒä¸‹åé¢çš„å†…å®¹ï½ï¼‰

```bash
docker run --rm -it -v /path/to/download:/app siguremo/yutto <url> [options]
```

ä¸ç›´æ¥è¿è¡Œ yutto ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œçš„ä¸‹è½½ç›®æ ‡è·¯å¾„æ˜¯é€šè¿‡ `-v <path>:/app` æŒ‡å®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ docker é‡Œçš„ yutto ä¼šå°†å†…å®¹ä¸‹è½½åˆ° docker é‡Œçš„ `/app` ç›®å½•ä¸‹ï¼Œä¸ä¹‹ç›¸å¯¹åº”çš„æŒ‚è½½ç‚¹ `<path>` å°±æ˜¯ä¸‹è½½è·¯å¾„ã€‚ä½ ä¹Ÿå¯ä»¥ç›´æ¥æŒ‚è½½åˆ° `$(pwd)`ï¼Œæ­¤æ—¶å°±å’Œæœ¬æœº yutto çš„é»˜è®¤è¡Œä¸ºä¸€è‡´å•¦ï¼Œä¹Ÿæ˜¯ä¸‹è½½åˆ°å½“å‰ç›®å½•ä¸‹ï½

### pip/pipx/uv å®‰è£…

> [!TIP]
>
> åœ¨æ­¤ä¹‹å‰è¯·ç¡®ä¿å®‰è£… Python3.9 åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œå¹¶é…ç½®å¥½ FFmpegï¼ˆå‚ç…§ [bilili æ–‡æ¡£](https://bilili.nyakku.moe/guide/getting-started.html)ï¼‰

```bash
pip install yutto
```

å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ [pipx](https://github.com/pypa/pipx)/[uv](https://github.com/astral-sh/uv) æ¥å®‰è£… yuttoï¼ˆå½“ç„¶ï¼Œå‰ææ˜¯ä½ è¦è‡ªå·±å…ˆå®‰è£…å®ƒï¼‰

```bash
pipx install yutto      # ä½¿ç”¨ pipx
uv tool install yutto   # æˆ–è€…ä½¿ç”¨ uv
```

pipx/uv ä¼šç±»ä¼¼ Homebrew æ— æ„Ÿåœ°ä¸º yutto åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œä¸å…¶ä½™ç¯å¢ƒéš”ç¦»å¼€ï¼Œé¿å…æ±¡æŸ“ pip çš„ç¯å¢ƒï¼Œå› æ­¤ç›¸å¯¹äº pipï¼Œpipx/uv æ˜¯æ›´æ¨èçš„å®‰è£…æ–¹å¼ï¼ˆuv ä¼šæ¯” pipx æ›´å¿«äº›ï½ï¼‰ã€‚

### ä½“éªŒ main åˆ†æ”¯æœ€æ–°ç‰¹æ€§

> [!TIP]
>
> è¿™åŒæ ·è¦æ±‚ä½ è‡ªè¡Œé…ç½® Python å’Œ FFmpeg ç¯å¢ƒ

æœ‰äº›æ—¶å€™æœ‰ä¸€äº›åœ¨ main åˆ†æ”¯è¿˜æ²¡æœ‰å‘å¸ƒçš„æ–°ç‰¹æ€§æˆ–è€… bugfixï¼Œä½ å¯ä»¥å°è¯•ç›´æ¥å®‰è£… main åˆ†æ”¯çš„ä»£ç ï¼Œæœ€å¿«çš„æ–¹å¼ä»ç„¶æ˜¯é€šè¿‡ pip å®‰è£…ï¼Œåªä¸è¿‡éœ€è¦ä½¿ç”¨ git æè¿°ç¬¦

```bash
pip install git+https://github.com/yutto-dev/yutto@main                 # é€šè¿‡ pip
pipx install git+https://github.com/yutto-dev/yutto@main                # é€šè¿‡ pipx
uv tool install git+https://github.com/yutto-dev/yutto.git@main         # é€šè¿‡ uv
```

## ä¸»è¦åŠŸèƒ½

### åŸºæœ¬å‘½ä»¤

yutto çš„åŸºæœ¬å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
yutto <url>
```

ä½ å¯ä»¥é€šè¿‡ `yutto -h` æŸ¥çœ‹è¯¦ç»†å‘½ä»¤å‚æ•°ã€‚

å¦‚æœä½ éœ€è¦ä¸‹è½½**å•ä¸ª**è§†é¢‘ï¼Œåªéœ€è¦ä½¿ç”¨ yutto åŠ ä¸Šè¿™ä¸ªè§†é¢‘çš„åœ°å€å³å¯ã€‚å®ƒæ”¯æŒ av/BV å·ä»¥åŠç›¸åº”å¸¦ p=n å‚æ•°çš„æŠ•ç¨¿è§†é¢‘é¡µé¢ï¼Œä¹Ÿæ”¯æŒ ep å·ï¼ˆepisode_idï¼‰çš„ç•ªå‰§é¡µé¢ã€‚

æ¯”å¦‚åªéœ€è¦è¿™æ ·ä½ å°±å¯ä»¥ä¸‹è½½[ã€Šè»¢ã‚¹ãƒ©æ—¥è¨˜ã€‹](https://www.bilibili.com/bangumi/play/ep395211)ç¬¬ä¸€è¯ï¼š

```bash
yutto https://www.bilibili.com/bangumi/play/ep395211
```

yutto è¿˜æ”¯æŒç›´æ¥ä½¿ç”¨èƒ½å¤Ÿå”¯ä¸€å®šä½èµ„æºçš„ id æ¥ä½œä¸º `<url>`ï¼Œåˆšåˆšçš„åŠŸèƒ½ä¸ä¸‹é¢çš„ç®€åŒ–åçš„å‘½ä»¤åŠŸèƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„

```bash
yutto ep395211
```

ä¸è¿‡æœ‰æ—¶ä½ å¯èƒ½æƒ³è¦æ‰¹é‡ä¸‹è½½å¾ˆå¤šå‰§é›†ï¼Œå› æ­¤ yutto æä¾›äº†ç”¨äºæ‰¹é‡ä¸‹è½½çš„å‚æ•° `-b/--batch`ï¼Œå®ƒä¸ä»…æ”¯æŒå‰é¢æ‰€è¯´çš„å•ä¸ªè§†é¢‘æ‰€åœ¨é¡µé¢åœ°å€ï¼ˆä¼šè§£æè¯¥å•ä¸ªè§†é¢‘æ‰€åœ¨çš„ç³»åˆ—è§†é¢‘ï¼‰ï¼Œè¿˜æ”¯æŒä¸€äº›æ˜ç¡®ç”¨äºè¡¨ç¤ºç³»åˆ—è§†é¢‘çš„åœ°å€ï¼Œæ¯”å¦‚ md é¡µé¢ï¼ˆmedia_idï¼‰ã€ss é¡µé¢ï¼ˆseason_idï¼‰ã€‚

æ¯”å¦‚åƒä¸‹é¢è¿™æ ·å°±å¯ä»¥ä¸‹è½½ã€Šè»¢ã‚¹ãƒ©æ—¥è¨˜ã€‹æ‰€æœ‰å·²æ›´æ–°çš„å‰§é›†ï¼š

```bash
yutto --batch https://www.bilibili.com/bangumi/play/ep395211
```

### æ›´å¤šåŠŸèƒ½

yutto è¿˜æ”¯æŒå¾ˆå¤šåŠŸèƒ½ï¼Œé™äºç¯‡å¹…ä¸åœ¨ `README` ä¸­å±•ç¤ºï¼Œä½ å¯ä»¥å‰å¾€ [yutto æ–‡æ¡£](https://yutto.nyakku.moe/) æŸ¥çœ‹æ›´å¤šè¯¦ç»†å†…å®¹ï½

## å…¶ä»–åº”ç”¨

ä½ ä¹Ÿå¯ä»¥é€šè¿‡è¿™äº›åº”ç”¨æ¥ä½¿ç”¨ yutto

-  [KubeSpider](https://github.com/opennaslab/kubespider): ä¸€ä¸ªå¤šåŠŸèƒ½å…¨å±€èµ„æºç¼–æ’ä¸‹è½½ç³»ç»Ÿï¼Œæ”¯æŒä¸‹è½½ã€è®¢é˜…å„ç±»èµ„æºç½‘ç«™ï½

## Roadmap

### 2.0.0

-  [x] feat: æ”¯æŒå¼¹å¹•å­—ä½“ã€å­—å·ã€é€Ÿåº¦ç­‰è®¾ç½®
-  [x] feat: é…ç½®æ–‡ä»¶æ”¯æŒ
-  [x] feat: é…ç½®æ–‡ä»¶åŠŸèƒ½ä¼˜åŒ–ï¼Œæ”¯æŒè‡ªå®šä¹‰é…ç½®è·¯å¾„
-  [x] docs: issue template æ·»åŠ é…ç½®å¼•å¯¼
-  [x] docs: ä¼˜åŒ– biliass rust é‡æ„åçš„è´¡çŒ®æŒ‡å—

### future

-  [x] docs: å¯çˆ±çš„é™æ€æ–‡æ¡£ï¼ˆWIP in [#86](https://github.com/yutto-dev/yutto/pull/86)ï¼‰
-  [ ] feat: æ–°çš„åŸºäº toml çš„ä»»åŠ¡åˆ—è¡¨
-  [ ] refactor: é…ç½®å‚æ•°å¤ç”¨ pydantic éªŒè¯
-  [ ] refactor: é’ˆå¯¹è§†é¢‘åˆé›†ä¼˜åŒ–è·¯å¾„å˜é‡
-  [ ] refactor: ä¼˜åŒ–æœæ¯”è§†ç•Œ/éŸ³æ•ˆ/å…¨æ™¯å£°é€‰å–é€»è¾‘ï¼ˆDiscussing in [#62](https://github.com/yutto-dev/yutto/discussions/62)ï¼‰
-  [ ] refactor: ç›´æ¥ä½¿ç”¨ rich æ›¿ä»£å†…ç½®çš„ç»ˆç«¯æ˜¾ç¤ºæ¨¡å—
-  [ ] feat: æ›´å¤šæ‰¹ä¸‹è½½æ”¯æŒ
-  [ ] feat: ä»¥åŠæ›´åŠ å¯çˆ±ï½

## å‚ä¸è´¡çŒ®

è¯·é˜…è¯» [CONTRIBUTING.md](CONTRIBUTING.md)
